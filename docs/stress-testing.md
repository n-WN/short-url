# çŸ­é“¾æŽ¥æœåŠ¡åŽ‹åŠ›æµ‹è¯•ä½“ç³»æ€»ç»“

## ðŸŽ¯ åŽ‹æµ‹ä½“ç³»æ¦‚è§ˆ

æˆ‘ä»¬ä¸ºçŸ­é“¾æŽ¥æœåŠ¡æž„å»ºäº†ä¸€å¥—å®Œæ•´çš„åŽ‹åŠ›æµ‹è¯•ä½“ç³»ï¼ŒåŒ…å«ä¸‰ä¸ªå±‚æ¬¡çš„æµ‹è¯•å·¥å…·å’Œè¯¦ç»†çš„æ€§èƒ½åˆ†æžæ–¹æ¡ˆã€‚

## ðŸ“‹ å·²æž„å»ºçš„åŽ‹æµ‹å·¥å…·

### 1. å¿«é€Ÿè´Ÿè½½æµ‹è¯• (quick_load_test.sh)
**ç”¨é€”**: å¼€å‘é˜¶æ®µå¿«é€ŸéªŒè¯æœåŠ¡æ€§èƒ½
**ç‰¹ç‚¹**: 
- æµ‹è¯•æ—¶é—´çŸ­ï¼ˆ~1åˆ†é’Ÿï¼‰
- åŒ…å«æ‰€æœ‰æ ¸å¿ƒæŽ¥å£æµ‹è¯•
- è‡ªåŠ¨åˆ›å»ºæµ‹è¯•æ•°æ®
- æ˜¾ç¤ºå®žæ—¶èµ„æºä½¿ç”¨æƒ…å†µ

**æµ‹è¯•ç»“æžœç¤ºä¾‹**:
```
ðŸ¥ å¥åº·æ£€æŸ¥æŽ¥å£: 31,159 RPS
âž• åˆ›å»ºçŸ­é“¾æŽ¥: 3,199 RPS  
ðŸ”„ é‡å®šå‘æŽ¥å£: 23,888 RPS
ðŸ“Š ä¿¡æ¯æŸ¥è¯¢: æ ¹æ®æ•°æ®è€Œå®š
```

### 2. æ ‡å‡†åŽ‹åŠ›æµ‹è¯• (benchmark.sh)
**ç”¨é€”**: å…¨é¢çš„å¤šåœºæ™¯åŽ‹åŠ›æµ‹è¯•
**ç‰¹ç‚¹**:
- å…­ç§ä¸åŒæµ‹è¯•åœºæ™¯
- è‡ªå®šä¹‰æµ‹è¯•å‚æ•°
- è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- ç³»ç»Ÿèµ„æºç›‘æŽ§

**æµ‹è¯•åœºæ™¯**:
- å¥åº·æ£€æŸ¥æŽ¥å£åŽ‹æµ‹
- åˆ›å»ºçŸ­é“¾æŽ¥åŽ‹æµ‹
- é‡å®šå‘æŽ¥å£åŽ‹æµ‹
- ä¿¡æ¯æŸ¥è¯¢åŽ‹æµ‹
- ç»Ÿè®¡æŽ¥å£åŽ‹æµ‹
- æ··åˆè´Ÿè½½æµ‹è¯•ï¼ˆæ¨¡æ‹ŸçœŸå®žåœºæ™¯ï¼‰

### 3. è¯¦ç»†æ€§èƒ½åˆ†æž (performance_test.sh)
**ç”¨é€”**: ç”Ÿäº§å‰å…¨é¢æ€§èƒ½è¯„ä¼°
**ç‰¹ç‚¹**:
- ç³»ç»Ÿé¢„çƒ­æœºåˆ¶
- å®žæ—¶èµ„æºç›‘æŽ§
- è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
- æ€§èƒ½æŒ‡æ ‡åˆ†æž
- ä¼˜åŒ–å»ºè®®

**è¾“å‡ºæ–‡ä»¶**:
- performance_report.md (ä¸»æŠ¥å‘Š)
- resource_monitor.log (èµ„æºç›‘æŽ§)
- *_benchmark.txt (å„æŽ¥å£è¯¦ç»†ç»“æžœ)

## ðŸš€ ä½¿ç”¨æ–¹å¼

### å¿«é€Ÿå¼€å§‹
```bash
# 1. å¯åŠ¨æœåŠ¡
make docker-up

# 2. è¿è¡Œå¿«é€Ÿè´Ÿè½½æµ‹è¯•
make load-test

# 3. æŸ¥çœ‹ç»“æžœ
# æŽ§åˆ¶å°ç›´æŽ¥æ˜¾ç¤ºä¸»è¦æ€§èƒ½æŒ‡æ ‡
```

### å…¨é¢åŽ‹æµ‹
```bash
# æ ‡å‡†åŽ‹åŠ›æµ‹è¯•
make benchmark

# è¯¦ç»†æ€§èƒ½åˆ†æž
make performance-test

# åŠŸèƒ½éªŒè¯æµ‹è¯•
make functional-test
```

### è‡ªå®šä¹‰å‚æ•°
```bash
# è‡ªå®šä¹‰æµ‹è¯•æŒç»­æ—¶é—´å’Œå¹¶å‘æ•°
./scripts/benchmark.sh -d 60s -t 12 -c 500

# è‡ªå®šä¹‰æ€§èƒ½æµ‹è¯•æ—¶é•¿
./scripts/performance_test.sh -d 120s
```

## ðŸ“Š æ€§èƒ½åŸºå‡†ç»“æžœ

åŸºäºŽæµ‹è¯•ç»“æžœï¼Œæˆ‘ä»¬çš„çŸ­é“¾æŽ¥æœåŠ¡æ€§èƒ½è¡¨çŽ°å¦‚ä¸‹ï¼š

| æŽ¥å£ç±»åž‹ | æ¯ç§’è¯·æ±‚æ•° (RPS) | å»¶è¿Ÿè¡¨çŽ° | è¯´æ˜Ž |
|----------|------------------|----------|------|
| å¥åº·æ£€æŸ¥ | 31,000+ | æžä½Žå»¶è¿Ÿ | å†…å­˜æ“ä½œï¼Œæ€§èƒ½æœ€ä½³ |
| åˆ›å»ºçŸ­é“¾æŽ¥ | 3,000+ | ä¸­ç­‰å»¶è¿Ÿ | åŒ…å«æ•°æ®åº“å†™å…¥å’Œç¼“å­˜æ“ä½œ |
| é‡å®šå‘ | 23,000+ | ä½Žå»¶è¿Ÿ | Redis ç¼“å­˜ä¼˜åŒ–æ•ˆæžœæ˜¾è‘— |
| ä¿¡æ¯æŸ¥è¯¢ | æ ¹æ®ç¼“å­˜æƒ…å†µ | ä½Ž-ä¸­ç­‰å»¶è¿Ÿ | æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½ |

## ðŸ”§ åŽ‹æµ‹é…ç½®æ–‡ä»¶

### æµ‹è¯•é…ç½® (configs/load_test_configs.yaml)
åŒ…å«å››ç§æµ‹è¯•åœºæ™¯é…ç½®ï¼š
- **è½»é‡çº§æµ‹è¯•**: é€‚åˆå¼€å‘çŽ¯å¢ƒ
- **ä¸­ç­‰è´Ÿè½½**: åŠŸèƒ½éªŒè¯
- **é«˜è´Ÿè½½**: æ€§èƒ½éªŒè¯  
- **æžé™åŽ‹æµ‹**: ç¨³å®šæ€§æµ‹è¯•

### æ€§èƒ½ç›®æ ‡
å®šä¹‰äº†å„æŽ¥å£çš„æ€§èƒ½åŸºå‡†ï¼š
- å¥åº·æ£€æŸ¥: >5000 RPS, P99 < 10ms
- åˆ›å»ºçŸ­é“¾æŽ¥: >100 RPS, P99 < 500ms
- é‡å®šå‘: >1000 RPS, P99 < 100ms
- ä¿¡æ¯æŸ¥è¯¢: >500 RPS, P99 < 200ms

## ðŸŽ¨ åŽ‹æµ‹ç‰¹è‰²åŠŸèƒ½

### 1. æ™ºèƒ½æµ‹è¯•æ•°æ®ç”Ÿæˆ
- è‡ªåŠ¨åˆ›å»ºæµ‹è¯•ç”¨çŸ­é“¾æŽ¥
- é¿å…æ•°æ®å†²çª
- æ”¯æŒå¤§è§„æ¨¡æ•°æ®ç”Ÿæˆ

### 2. çœŸå®žåœºæ™¯æ¨¡æ‹Ÿ
**æ··åˆè´Ÿè½½æµ‹è¯•**æ¨¡æ‹ŸçœŸå®žç”¨æˆ·è¡Œä¸ºï¼š
- 5% åˆ›å»ºæ“ä½œ
- 85% é‡å®šå‘æ“ä½œ
- 8% ä¿¡æ¯æŸ¥è¯¢
- 2% ç»Ÿè®¡æŸ¥è¯¢

### 3. å®žæ—¶èµ„æºç›‘æŽ§
- Docker å®¹å™¨ CPU/å†…å­˜ä½¿ç”¨çŽ‡
- Redis å†…å­˜ä½¿ç”¨æƒ…å†µ
- PostgreSQL è¿žæŽ¥æ•°ç»Ÿè®¡
- ç½‘ç»œå’Œç£ç›˜ I/O ç›‘æŽ§

### 4. è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ
- Markdown æ ¼å¼çš„è¯¦ç»†æŠ¥å‘Š
- æ€§èƒ½æŒ‡æ ‡åˆ†æž
- ä¼˜åŒ–å»ºè®®
- é—®é¢˜è¯Šæ–­

## ðŸ› ï¸ æŠ€æœ¯å®žçŽ°äº®ç‚¹

### 1. Lua è„šæœ¬ä¼˜åŒ–
ä½¿ç”¨ wrk çš„ Lua è„šæœ¬åŠŸèƒ½ï¼š
- åŠ¨æ€ç”Ÿæˆæµ‹è¯•æ•°æ®
- éšæœºé€‰æ‹©æµ‹è¯•ç›®æ ‡
- è‡ªå®šä¹‰è¯·æ±‚é€»è¾‘
- å“åº”éªŒè¯

### 2. å¤šå±‚æ¬¡æµ‹è¯•æž¶æž„
- **å¿«é€Ÿæµ‹è¯•**: 1åˆ†é’Ÿå®ŒæˆåŸºæœ¬éªŒè¯
- **æ ‡å‡†æµ‹è¯•**: 30ç§’/åœºæ™¯çš„æ·±åº¦æµ‹è¯•
- **è¯¦ç»†åˆ†æž**: 60ç§’/åœºæ™¯çš„å…¨é¢è¯„ä¼°

### 3. é”™è¯¯å¤„ç†å’Œæ¢å¤
- è‡ªåŠ¨æ£€æµ‹ä¾èµ–å·¥å…·
- æœåŠ¡çŠ¶æ€éªŒè¯
- ä¼˜é›…çš„é”™è¯¯æç¤º
- æµ‹è¯•æ–‡ä»¶è‡ªåŠ¨æ¸…ç†

## ðŸ“ˆ æ€§èƒ½ä¼˜åŒ–éªŒè¯

é€šè¿‡åŽ‹æµ‹æˆ‘ä»¬éªŒè¯äº†ä»¥ä¸‹ä¼˜åŒ–æŽªæ–½çš„æ•ˆæžœï¼š

### 1. Redis ç¼“å­˜ä¼˜åŒ–
- é‡å®šå‘æŽ¥å£è¾¾åˆ° 23,000+ RPS
- ç¼“å­˜å‘½ä¸­çŽ‡æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒ
- å¸ƒéš†è¿‡æ»¤å™¨æœ‰æ•ˆå‡å°‘æ— æ•ˆæŸ¥è¯¢

### 2. æ•°æ®åº“è®¾è®¡ä¼˜åŒ–
- ç´¢å¼•ç­–ç•¥æå‡æŸ¥è¯¢æ€§èƒ½
- è¿žæŽ¥æ± é…ç½®åˆç†
- å¼‚æ­¥è®¿é—®è®¡æ•°ä¸å½±å“é‡å®šå‘æ€§èƒ½

### 3. åº”ç”¨å±‚ä¼˜åŒ–
- Gin æ¡†æž¶é«˜æ€§èƒ½è·¯ç”±
- å¼‚æ­¥æ—¥å¿—è®°å½•
- å†…å­˜ä½¿ç”¨ä¼˜åŒ–

## ðŸš¨ ç›‘æŽ§å’Œå‘Šè­¦

### èµ„æºä½¿ç”¨é˜ˆå€¼
- CPU ä½¿ç”¨çŽ‡è­¦å‘Š: 80%
- å†…å­˜ä½¿ç”¨çŽ‡è­¦å‘Š: 85%
- é”™è¯¯çŽ‡è­¦å‘Š: 5%
- å»¶è¿Ÿè­¦å‘Š: 1000ms

### å…³é”®æŒ‡æ ‡ç›‘æŽ§
- æ¯ç§’è¯·æ±‚æ•° (RPS)
- å“åº”å»¶è¿Ÿåˆ†å¸ƒ
- é”™è¯¯çŽ‡ç»Ÿè®¡
- ç³»ç»Ÿèµ„æºä½¿ç”¨

## ðŸŽ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–æ–¹å‘

åŸºäºŽåŽ‹æµ‹ç»“æžœï¼Œæˆ‘ä»¬è¯†åˆ«å‡ºä»¥ä¸‹ä¼˜åŒ–æœºä¼šï¼š

### 1. æ•°æ®åº“ä¼˜åŒ–
- è€ƒè™‘è¯»å†™åˆ†ç¦»
- ä¼˜åŒ–æ…¢æŸ¥è¯¢
- è°ƒæ•´è¿žæŽ¥æ± é…ç½®

### 2. ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
- è°ƒæ•´ TTL ç­–ç•¥
- å®žçŽ°å¤šçº§ç¼“å­˜
- ç¼“å­˜é¢„çƒ­æœºåˆ¶

### 3. åº”ç”¨æž¶æž„ä¼˜åŒ–
- å¾®æœåŠ¡æ‹†åˆ†è€ƒé‡
- å¼‚æ­¥å¤„ç†ä¼˜åŒ–
- è´Ÿè½½å‡è¡¡ç­–ç•¥

## ðŸ“š æ–‡æ¡£å’Œèµ„æº

æˆ‘ä»¬æä¾›äº†å®Œæ•´çš„åŽ‹æµ‹æ–‡æ¡£ï¼š

1. **LOAD_TESTING.md**: è¯¦ç»†çš„åŽ‹åŠ›æµ‹è¯•æŒ‡å—
2. **configs/load_test_configs.yaml**: æµ‹è¯•é…ç½®æ–‡ä»¶
3. **scripts/**: ä¸‰ä¸ªä¸åŒå±‚æ¬¡çš„åŽ‹æµ‹è„šæœ¬
4. **Makefile**: ä¾¿æ·çš„å‘½ä»¤è¡ŒæŽ¥å£

## ðŸŽ‰ æ€»ç»“

æˆ‘ä»¬æˆåŠŸæž„å»ºäº†ä¸€ä¸ªä¼ä¸šçº§çš„åŽ‹åŠ›æµ‹è¯•ä½“ç³»ï¼ŒåŒ…å«ï¼š

âœ… **ä¸‰å±‚æ¬¡åŽ‹æµ‹å·¥å…·**: æ»¡è¶³ä¸åŒé˜¶æ®µçš„æµ‹è¯•éœ€æ±‚
âœ… **è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹**: ä¸€é”®æ‰§è¡Œï¼Œè‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š
âœ… **çœŸå®žåœºæ™¯æ¨¡æ‹Ÿ**: æ··åˆè´Ÿè½½æµ‹è¯•æ¨¡æ‹Ÿå®žé™…ç”¨æˆ·è¡Œä¸º
âœ… **è¯¦ç»†æ€§èƒ½åˆ†æž**: å¤šç»´åº¦æŒ‡æ ‡æ”¶é›†å’Œåˆ†æž
âœ… **å®Œæ•´æ–‡æ¡£æ”¯æŒ**: è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œé…ç½®è¯´æ˜Ž

è¿™å¥—åŽ‹æµ‹ä½“ç³»ä¸ºçŸ­é“¾æŽ¥æœåŠ¡çš„æ€§èƒ½ä¼˜åŒ–å’Œç”Ÿäº§éƒ¨ç½²æä¾›äº†å¼ºæœ‰åŠ›çš„æ”¯æŒï¼Œç¡®ä¿æœåŠ¡èƒ½å¤Ÿåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ç¨³å®šè¿è¡Œã€‚

---

**å¿«é€Ÿä¸Šæ‰‹å‘½ä»¤**:
```bash
make docker-up    # å¯åŠ¨æœåŠ¡
make load-test    # å¿«é€ŸåŽ‹æµ‹
make benchmark    # æ ‡å‡†åŽ‹æµ‹
make performance-test  # è¯¦ç»†åˆ†æž
``` 