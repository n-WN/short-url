# Makefile ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°
çŸ­é“¾æ¥æœåŠ¡æä¾›äº†ä¸°å¯Œçš„ Makefile å‘½ä»¤æ¥ç®€åŒ–å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²å’Œç›‘æ§æµç¨‹ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨
```bash
make dev
```
è¿™ä¸ªå‘½ä»¤ä¼šï¼š
- å¯åŠ¨æ‰€æœ‰ Docker æœåŠ¡
- ç­‰å¾…æœåŠ¡å°±ç»ª
- æ˜¾ç¤ºæœåŠ¡çŠ¶æ€
- æä¾›åç»­æ“ä½œæŒ‡å¼•

### æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
```bash
make help
```

## ğŸ“‹ å‘½ä»¤åˆ†ç±»

### ğŸ”§ å¼€å‘ç¯å¢ƒ
| å‘½ä»¤ | æè¿° |
|------|------|
| `make deps` | å®‰è£… Go ä¾èµ– |
| `make build` | æ„å»ºåº”ç”¨ç¨‹åº |
| `make run` | ç›´æ¥è¿è¡Œåº”ç”¨ï¼ˆéå®¹å™¨ï¼‰ |
| `make migrate` | è¿è¡Œæ•°æ®åº“è¿ç§» |
| `make test` | è¿è¡Œå•å…ƒæµ‹è¯• |
| `make clean` | æ¸…ç†æ„å»ºæ–‡ä»¶ |

### ğŸ³ Docker æ“ä½œ
| å‘½ä»¤ | æè¿° |
|------|------|
| `make docker-build` | æ„å»º Docker é•œåƒ |
| `make docker-rebuild` | å¼ºåˆ¶é‡æ–°æ„å»ºé•œåƒï¼ˆæ¸…é™¤ç¼“å­˜ï¼‰ |
| `make docker-up` | å¯åŠ¨æ‰€æœ‰æœåŠ¡ |
| `make docker-down` | åœæ­¢æ‰€æœ‰æœåŠ¡ |
| `make docker-restart` | å®Œæ•´é‡å¯ï¼ˆåœæ­¢â†’é‡å»ºâ†’å¯åŠ¨ï¼‰ |
| `make docker-logs` | æŸ¥çœ‹å®¹å™¨æ—¥å¿— |

### ğŸ’¾ æ•°æ®åº“æ“ä½œ
| å‘½ä»¤ | æè¿° |
|------|------|
| `make db-up` | ä»…å¯åŠ¨æ•°æ®åº“å’Œ Redis |
| `make db-down` | åœæ­¢æ•°æ®åº“å’Œ Redis |
| `make db-reset` | å®Œå…¨é‡ç½®æ•°æ®åº“ï¼ˆâš ï¸ ä¼šåˆ é™¤æ‰€æœ‰æ•°æ®ï¼‰ |

### ğŸ” ç›‘æ§å’Œè°ƒè¯•
| å‘½ä»¤ | æè¿° |
|------|------|
| `make status` | æŸ¥çœ‹æœåŠ¡çŠ¶æ€å’Œå¥åº·æ£€æŸ¥ |
| `make stats` | æŸ¥çœ‹æœåŠ¡ç»Ÿè®¡ä¿¡æ¯ |
| `make memory-debug` | æŸ¥çœ‹å†…å­˜è°ƒè¯•ä¿¡æ¯ |
| `make memory-monitor` | å¯åŠ¨å®æ—¶å†…å­˜ç›‘æ§ |
| `make memory-monitor-bg` | åå°å¯åŠ¨å†…å­˜ç›‘æ§ |
| `make memory-analysis` | å†…å­˜åˆ†ææŒ‡å¼• |
| `make logs` | æŸ¥çœ‹åº”ç”¨æ—¥å¿— |
| `make debug` | è°ƒè¯•æ¨¡å¼ï¼ˆæŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼‰ |

### ğŸ§ª æµ‹è¯•å’ŒéªŒè¯
| å‘½ä»¤ | æè¿° |
|------|------|
| `make api-test` | åŸºç¡€ API åŠŸèƒ½æµ‹è¯• |
| `make functional-test` | å®Œæ•´åŠŸèƒ½æµ‹è¯• |
| `make load-test` | å¿«é€Ÿè´Ÿè½½æµ‹è¯•ï¼ˆ1åˆ†é’Ÿï¼‰ |
| `make benchmark` | æ ‡å‡†å‹åŠ›æµ‹è¯• |
| `make performance-test` | è¯¦ç»†æ€§èƒ½åˆ†æ |
| `make stress-test` | è¿è¡Œæ‰€æœ‰å‹åŠ›æµ‹è¯• |

### ğŸ§¹ æ¸…ç†å’Œç»´æŠ¤
| å‘½ä»¤ | æè¿° |
|------|------|
| `make clean` | æ¸…ç†æ„å»ºæ–‡ä»¶ |
| `make clean-containers` | æ¸…ç† Docker å®¹å™¨å’Œé•œåƒ |
| `make clean-all` | å®Œå…¨æ¸…ç†æ‰€æœ‰èµ„æº |
| `make fix-permissions` | ä¿®å¤è„šæœ¬æ‰§è¡Œæƒé™ |

### ğŸ“Š æŠ¥å‘Šç”Ÿæˆ
| å‘½ä»¤ | æè¿° |
|------|------|
| `make report` | ç”Ÿæˆå®Œæ•´çš„æœåŠ¡çŠ¶æ€æŠ¥å‘Š |

### âš™ï¸ å¼€å‘å·¥å…·
| å‘½ä»¤ | æè¿° |
|------|------|
| `make fmt` | æ ¼å¼åŒ– Go ä»£ç  |
| `make lint` | è¿è¡Œä»£ç æ£€æŸ¥ |

## ğŸ“– å¸¸ç”¨åœºæ™¯

### ğŸ¯ æ—¥å¸¸å¼€å‘æµç¨‹
```bash
# 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ
make dev

# 2. æµ‹è¯• API
make api-test

# 3. æŸ¥çœ‹å†…å­˜ä½¿ç”¨
make memory-debug

# 4. è¿è¡Œå‹åŠ›æµ‹è¯•
make load-test
```

### ğŸ› é—®é¢˜æ’æŸ¥
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
make status

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
make debug

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
make memory-monitor

# ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š
make report
```

### ğŸ”„ ä»£ç å˜æ›´åçš„æµç¨‹
```bash
# é‡æ–°æ„å»ºå’Œå¯åŠ¨
make docker-restart

# éªŒè¯åŠŸèƒ½
make functional-test

# æ€§èƒ½æµ‹è¯•
make benchmark
```

### ğŸ§¹ ç¯å¢ƒæ¸…ç†
```bash
# è½»åº¦æ¸…ç†
make clean

# é‡ç½®æ•°æ®åº“
make db-reset

# å®Œå…¨æ¸…ç†
make clean-all
```

## ğŸ”§ æ•…éšœæ’é™¤

### æƒé™é—®é¢˜
```bash
make fix-permissions
```

### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
make debug

# å®Œå…¨é‡å¯
make docker-restart
```

### æ•°æ®åº“é—®é¢˜
```bash
# é‡ç½®æ•°æ®åº“
make db-reset
```

### å†…å­˜é—®é¢˜
```bash
# å®æ—¶ç›‘æ§
make memory-monitor

# è¯¦ç»†åˆ†æ
make memory-debug
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å¼€å‘å‰**: è¿è¡Œ `make dev` ç¡®ä¿ç¯å¢ƒå°±ç»ª
2. **ä»£ç ä¿®æ”¹å**: ä½¿ç”¨ `make docker-restart` é‡æ–°éƒ¨ç½²
3. **æ€§èƒ½æµ‹è¯•**: å…ˆè¿è¡Œ `make load-test`ï¼Œå†è¿›è¡Œ `make benchmark`
4. **é—®é¢˜æ’æŸ¥**: ä½¿ç”¨ `make status` å’Œ `make debug`
5. **å®šæœŸæ¸…ç†**: è¿è¡Œ `make clean-containers` æ¸…ç† Docker èµ„æº

## ğŸ“ˆ æ€§èƒ½ç›‘æ§å·¥ä½œæµ

1. å¯åŠ¨æœåŠ¡ï¼š`make docker-up`
2. åŸºçº¿æµ‹è¯•ï¼š`make api-test`
3. è´Ÿè½½æµ‹è¯•ï¼š`make load-test`
4. å†…å­˜ç›‘æ§ï¼š`make memory-monitor-bg`
5. å‹åŠ›æµ‹è¯•ï¼š`make stress-test`
6. ç”ŸæˆæŠ¥å‘Šï¼š`make report`

è¿™æ ·çš„å·¥ä½œæµèƒ½å¤Ÿå…¨é¢è¯„ä¼°æœåŠ¡çš„æ€§èƒ½è¡¨ç°å’Œèµ„æºä½¿ç”¨æƒ…å†µã€‚ 